<input type="search" placeholder="search products..." ng-model="searchTerm" />

<table class="products">
	<tr ng-repeat-start="product in products | filter:{ title: searchTerm }">
		<td>
			<span class="title">{{ product.title }}</span>
		</td>
		<td class="info">
			<div class="price">{{ product.price | currency }}</div>
			<div class="quantity">in stock: {{ product.quantity }} <div quantity-indicator value="{{product.quantity}}" max-value="100"></div></div>
			<div><button ng-hide="visibleDetails[product.id]" ng-click="showDetails(product.id)">Show details</button></div>
			<div><button ng-show="visibleDetails[product.id]" ng-click="hideDetails(product.id)">Hide details</button></div>
			<div><button ng-click="addToCart(product)">Add to cart</button></div>
		</td>
	</tr>
	<tr ng-repeat-end ng-show="visibleDetails[product.id]" class="productDetails">
		<td colspan="2">
			<div ng-include="'/views/productDetails.html'"></div>
		</td>
	</tr>
</table>
